{{define "nav"}}
<div class="px-4 mb-10 border-b-2 border-black flex justify-between items-center h-20">
    <a class="text-4xl" href="/">
        瑪雅資訊雲端平台
    </a>
    <div>
        <ul class="flex gap-4">
            {{if .IsAuthenticated}}
            <li>
                <form action="/user/logout" method="post">
                    <button  class="text-2xl" >
                        登出
                    </button>
                </form>
            </li>
            {{end}}
        </ul>
    </div>
</div>
{{end}}

{{define "main"}}
<div>
    <div class="w-full px-40 flex flex-col gap-4">
        <div>
            <a href="/">👈返回課程列表</a>
        </div>
        {{if .Course}}
        <div class=" overflow-hidden w-full border-2 border-black flex rounded-xl aspect-video">
            <div class="w-full h-full grid grid-cols-[8rem_1fr]">
                <div class="border-r-2 border-black w-32">
                    <div class="h-9 flex justify-center items-center">
                        <p >章節資訊</p>
                    </div>
                    <ul>
                    {{range .Course.Chapters}}
                        <li>
                            <div class="border-2 border-gray-400 h-9 flex justify-center items-center">
                                <a href="/courses/{{.CourseID}}/chapters/{{.ID}}">
                                    <p>
                                        第 {{.ChapNum}} 章
                                    </p>
                                </a>
                            </div>
                        </li>
                    {{end}}
                    </ul>
                </div>
                <div class=" grid grid-rows-[5rem_1fr] w-full">
                    <div class="pl-4 pt-2">
                        <h2 class="text-2xl">{{.Course.Title}} - {{.Course.Instructor}}</h2>
                        <div class="flex items-center">
                            {{if .Chapter.Link}} 
                            <h3>第 {{.Chapter.ChapNum}} 章 <span class="ml-6">{{.Chapter.Title}}</span> - <span>{{.Chapter.Description}}</span></h3>
                            {{else}}
                            {{end}}

                        </div>
                    </div>
                    {{if .Chapter.Link}}
                    <video  src="{{.Chapter.Link}}" controls></video>
                    {{else}}
                    <div class="pl-4">
                        {{if .Course.Chapters}}
                        請選擇章節以開始學習
                        {{else}}
                        此課程尚未有章節資訊
                        {{end}}
                    </div>
                    {{end}}
                </div>
            </div>
        </div>
        {{else}}
        <div class="w-full border-2 border-black flex rounded-xl aspect-video">
            <div class="w-full h-full grid grid-cols-[8rem_1fr]">
                <div class="border-r-2 border-black w-32">
                    <div class="h-9 flex justify-center items-center">
                        <h2 >章節資訊</h2>
                    </div>
                    <ul>
                        <li>
                            <div class="border-2 border-gray-400 h-9 flex justify-center items-center">
                                <p>
                                    無章節資訊
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="flex flex-col justify-between">
                    <div class="h-9 flex items-center pl-4">
                        <h3>無章節資訊</h3>
                    </div>
                    <video  src="{{.Course.Link}}" controls></video>
                </div>
            </div>
            {{end}}

    </div>

</div>


{{end}}